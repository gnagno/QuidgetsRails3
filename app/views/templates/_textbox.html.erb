<input 
  type="text" 
  id="<%= html_options[:id] %>" 
  name="<%= html_options[:name] %>" 
  class="ph-textbox <%= html_options[:class] %>" 
  value="<%= value %>"
  data-model-name="<%= object_model %>"
  data-object-id="<%= object_id %>"
  data-method="<%= method %>"
/>

<script type="text/javascript">
$(function(){
  $(".ph-textbox").live('keypress', function(event){
    if (event.which == '13') {
      save_textbox(
        $(this).attr('data-object-id'), 
        $(this).attr('data-model-name'), 
        $(this).attr('data-method'),
        $(this).attr('value') 
      );
   }
  });
});

// I created a separate function for saving so we can use this both when the 
// user press enter key and when the user leaves the widget
function save_textbox(object_id, model_name, method_name, value){
  $.ajax({
    url: "<%= ph_quidgets_textbox_update_path %>",
    data: {id: object_id, object_model_name: model_name, method: method_name, svalue: value},
      dataType: "json",
      success: function(result){
        alert(result.msg); //TODO: We have to decide what to do with the result...
      }
  });
};
</script>
